{
    "name": "vscode-xlog",
    "displayName": "Xlog 解码工具",
    "description": "用于解码 Xlog 日志文件",
    "version": "1.0.0",
    "publisher": "xlog-decoder",
    "repository": {
        "type": "git",
        "url": "https://github.com/ircc/vscode-xlog"
    },
    "engines": {
        "vscode": "^1.60.0"
    },
    "categories": [
        "Other"
    ],
    "icon": "resources/icon.png",
    "activationEvents": [
        "onCommand:vscode-xlog.decodeFile",
        "onCommand:vscode-xlog.decodeDirectory",
        "onCommand:vscode-xlog.showInfo",
        "onCommand:vscode-xlog.splitFile",
        "onLanguage:xlog",
        "onFileSystem:file",
        "workspaceContains:**/*.xlog",
        "workspaceContains:**/*.mmap3"
    ],
    "main": "./out/extension.js",
    "contributes": {
        "commands": [
            {
                "command": "vscode-xlog.decodeFile",
                "title": "解码 Xlog 文件"
            },
            {
                "command": "vscode-xlog.decodeDirectory",
                "title": "解码目录中的所有 Xlog 文件"
            },
            {
                "command": "vscode-xlog.showInfo",
                "title": "显示 Xlog 解码工具信息"
            },
            {
                "command": "vscode-xlog.deleteDecodedFiles",
                "title": "删除目录下所有已解码日志文件"
            },
            {
                "command": "vscode-xlog.splitFile",
                "title": "Split File"
            }
        ],
        "customEditors": [
            {
                "viewType": "vscode-xlog.xlogEditor",
                "displayName": "Xlog 解码器",
                "selector": [
                    {
                        "filenamePattern": "*.xlog"
                    },
                    {
                        "filenamePattern": "*.mmap3"
                    }
                ],
                "priority": "option"
            }
        ],
        "menus": {
            "explorer/context": [
                {
                    "when": "resourceExtname =~ /\\.(xlog|mmap3)$/",
                    "command": "vscode-xlog.decodeFile",
                    "group": "navigation"
                },
                {
                    "when": "explorerResourceIsFolder",
                    "command": "vscode-xlog.decodeDirectory",
                    "group": "navigation"
                },
                {
                    "when": "explorerResourceIsFolder",
                    "command": "vscode-xlog.deleteDecodedFiles",
                    "group": "navigation"
                },
                {
                    "when": "resourceExtname == '.log'",
                    "command": "vscode-xlog.splitFile",
                    "group": "navigation"
                }
            ],
            "editor/title/context": [
                {
                    "when": "resourceExtname =~ /\\.(xlog|mmap3)$/",
                    "command": "vscode-xlog.decodeFile",
                    "group": "navigation"
                }
            ]
        },
        "languages": [
            {
                "id": "xlog",
                "extensions": [
                    ".xlog",
                    ".mmap3"
                ]
            }
        ],
        "configuration": {
            "title": "Xlog 解码工具",
            "properties": {
                "vscode-xlog.rxdPath": {
                    "type": "string",
                    "default": "",
                    "description": "rxd 可执行文件路径。留空则使用插件自带的rxd解码器。"
                },
                "vscode-xlog.autoOpenDecodedFile": {
                    "type": "boolean",
                    "default": true,
                    "description": "解码完成后自动打开解码后的文件"
                }
            }
        }
    },
    "scripts": {
        "compile": "tsc -p ./",
        "lint": "eslint src --ext ts || true",
        "watch": "tsc -watch -p ./",
        "pretest": "npm run compile && npm run lint",
        "test": "node ./out/test/runTest.js",
        "download-rxd": "node scripts/download-rxd.js",
        "postinstall": "npm run download-rxd"
    },
    "devDependencies": {
        "@types/glob": "^7.1.3",
        "@types/mocha": "^8.2.2",
        "@types/node": "14.x",
        "@types/vscode": "^1.60.0",
        "@vscode/test-electron": "^1.6.2",
        "eslint": "^7.32.0",
        "@typescript-eslint/eslint-plugin": "^4.30.0",
        "@typescript-eslint/parser": "^4.30.0",
        "typescript": "^4.4.3"
    }
}